<!doctype html>
<html lang="fr" data-ng-app="appRoot">
    <head>
        <title>Horse Racing Bet</title>

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="language" content="French">
        <meta name="robots" content="index, follow">
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height" />
        <meta name="description" content="horse betting in GTA 5 RP">
        <meta name="keywords" content="horse,bet,betting,rp,gta,five,fivem,gta online,gta server">
        <meta name="author" content="üêªÔΩúLeGrizzly#0341">

        <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        #  Horse Racing Bet

        #  Developed by    : üêªÔΩúLeGrizzly#0341
        #  Design by       : üêªÔΩúLeGrizzly#0341

        #  Support         : https://discord.gg/yM6XJMBBzV
         _                _____          _               _
        | |              / ____|        (_)             | |
        | |        ___  | |  __   _ __   _   ____  ____ | |  _   _
        | |       / _ \ | | |_ | | \__| | | |_  / |_  / | | | | | |
        | |____  |  __/ | |__| | | |    | |  / /   / /  | | | |_| |
        |______|  \___|  \_____| |_|    |_| /___| /___| |_|  \__, |
                                                              __/ |
                                                             |___/
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~_Update: 04/01/2023_~~-->

        <!-- Bootstrap core CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="/horse/assets/css/style.css" rel="stylesheet">

        <!-- Bootstrap core JS -->
        <script type="application/javascript" src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
        <script type="application/javascript" src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js"></script>

        <!-- MomentJS Script-->
        <script type="application/javascript" src="https://momentjs.com/downloads/moment-with-locales.js"></script>
        <script type="application/javascript">moment.locale("fr");</script>

        <!-- AngularJS Core -->
        <script type="application/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>

        <!-- jQuery JS Core-->
        <script type="application/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

        <!-- jQuery JS UI Core -->
        <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
        <script type="application/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

        <!-- SweetAlert2 -->
        <script type="application/javascript" src="https://cdn.jsdelivr.net/npm/sweetalert2@11.3.5/dist/sweetalert2.all.min.js"></script>

        <!-- Bootstrap Table CSS -->
        <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.19.1/dist/bootstrap-table.min.css">

        <!-- Bootstrap Table JS -->
        <script type="application/javascript" src="https://unpkg.com/bootstrap-table@1.19.1/dist/bootstrap-table.min.js"></script>

        <!-- Bootstrap Icons CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">

        <!-- Font Awesome CSS -->
        <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v6.0.0-beta3/css/all.css">

        <!-- Bootstrap datepicker JS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
        <script type="application/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
        <script type="application/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/locales/bootstrap-datepicker.fr.min.js" referrerpolicy="no-referrer" charset="UTF-8"></script>

        <!-- Custom styles for this template-->
        <script type="application/javascript" src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>

        <!-- AngularJS Script-->
        <script type="application/javascript" src="/horse/assets/js/app-angular.js"></script>

        <script>
          // var socket = io();

          // socket.on('announcements', function(data) {
          //   console.log('Got announcement:', data.message);
          //   console.log(data);
          // });
        </script>

        <style>
          .card {
            --bs-card-border-width: 0px;
          }

          .inProgress {
            background-image: linear-gradient(70deg, #2E5691 0%, rgba(147, 50, 123, 0.7) 59.37%, #D0692D 100%);
          }
        </style>
    </head>

    <body id="page-top" class="bg-dark modal-backdrop">
      <!-- Page Wrapper -->
      <div id="wrapper" data-ng-controller="appCommon">
        <header class="px-3 py-2" style="background-color: #191919;">
            <div class="container">
              <div class="d-flex flex-wrap align-items-center justify-content-between">
                <a href="/horse" class="d-flex align-items-center text-white text-decoration-none">
                  <i class="fa-regular fa-horse"></i>
                  <strong><span class="fs-5 p-2 h6">Horse Racing Bet</span></strong>
                </a>

                <div class="d-flex align-items-center">
                  <div class="dropdown">
                    <a href="#" class="d-flex link-dark text-decoration-none align-items-center justify-content-center avatar-logo" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fa-regular fa-user"></i>
                    </a>
                    <ul class="dropdown-menu text-small shadow">
                        <li><a class="dropdown-item" href="#">Profile</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li data-ng-if="session.grade>=4"><a class="dropdown-item" href="/horse/raceManagement">Gestion des Courses</a></li>
                        <li data-ng-if="session.grade>=4"><a class="dropdown-item" href="/horse/userManagement">Gestion des Utilisateurs</a></li>
                        <li data-ng-if="session.grade>=4"><a class="dropdown-item" href="#">Param√®tres</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="/logout">Sign out</a></li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
        </header>

        <!-- Nav bar START -->
        <!-- Nav bar END -->

        <div class="container mt-5 text-white">
          <div class="row justify-content-between align-items-baseline pt-3 pb-3">
            <div class="col-7 text-start">
              <div class="date datepicker" data-provide="datepicker" style="display: inline-flex;">
                <div class="btn btn-light">
                  <i class="fa-regular fa-calendar"></i>
                </div>
                <input type="text" class="form-control-plaintext text-white ps-3 text-capitalize fw-semibold" readonly>
              </div>
            </div>
            <div class="col-2 text-end">
              <div class="datepicker_prev">
                <div class="btn btn-light">
                  <i class="fa-solid fa-chevron-left"></i>
                </div>
              </div>
            </div>
            <div class="col-2">
              <div class="datepicker_next">
                <div class="btn btn-light">
                  <i class="fa-solid fa-chevron-right"></i>
                </div>
              </div>
            </div>
          </div>
          <hr>

          <div id="listLoading" data-ng-cloak data-ng-show="listRaceIsLoading">
            <div class="card pt-2 mt-1 mb-2 shadow-sm" style="background-color: #191919;">
              <div class="card-body p-2">
                <div class="row">
                  <div class="col-2">
                    <svg class="bd-placeholder-img" width="50" height="50" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#55595c" data-darkreader-inline-fill="" style="--darkreader-inline-fill:#323739;"></rect></svg>
                  </div>
                  <div class="col">
                    <div class="row">
                      <div class="col-12">
                        <p class="placeholder-glow">
                          <span class="placeholder col-6"></span>
                        </p>
                      </div>
                      <div class="col-12 pb-2">
                        <span class="placeholder-glow">
                          <span class="placeholder col-12"></span>
                        </span>
                      </div>
                    </div>
                  </div>
                  <div class="col text-end">
                    <p class="placeholder-glow">
                      <span class="placeholder col-8"></span>
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <p class="fw-semibold text-center">Ce programme des courses n'est pas encore disponible.</p>

            <div class="card pt-2 mt-1 mb-2 shadow-sm" style="background-color: #191919;">
              <div class="card-body p-2">
                <div class="row">
                  <div class="col-2">
                    <svg class="bd-placeholder-img" width="50" height="50" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#55595c" data-darkreader-inline-fill="" style="--darkreader-inline-fill:#323739;"></rect></svg>
                  </div>
                  <div class="col">
                    <div class="row">
                      <div class="col-12">
                        <p class="placeholder-glow">
                          <span class="placeholder col-6"></span>
                        </p>
                      </div>
                      <div class="col-12 pb-2">
                        <span class="placeholder-glow">
                          <span class="placeholder col-12"></span>
                        </span>
                      </div>
                    </div>
                  </div>
                  <div class="col text-end">
                    <p class="placeholder-glow">
                      <span class="placeholder col-8"></span>
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <div class="card pt-2 mt-1 mb-2 shadow-sm" style="background-color: #191919;">
              <div class="card-body p-2">
                <div class="row">
                  <div class="col-2">
                    <svg class="bd-placeholder-img" width="50" height="50" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#55595c" data-darkreader-inline-fill="" style="--darkreader-inline-fill:#323739;"></rect></svg>
                  </div>
                  <div class="col">
                    <div class="row">
                      <div class="col-12">
                        <p class="placeholder-glow">
                          <span class="placeholder col-6"></span>
                        </p>
                      </div>
                      <div class="col-12 pb-2">
                        <span class="placeholder-glow">
                          <span class="placeholder col-12"></span>
                        </span>
                      </div>
                    </div>
                  </div>
                  <div class="col text-end">
                    <p class="placeholder-glow">
                      <span class="placeholder col-8"></span>
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div id="listItems" data-ng-cloak data-ng-hide="listRaceIsLoading">
            <div class="card pt-2 pb-1 mt-1 mb-2 shadow-sm" data-ng-class="{inProgress: race[0].isEnd=='2'}" style="background-color: #191919;" data-ng-repeat="race in listRace track by $index" data-ng-click="openRace(race[0].id)">
              <div class="card-body p-2">
                <div class="row">
                  <div class="col-2">
                    <svg class="bd-placeholder-img" width="50" height="50" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#55595c" data-darkreader-inline-fill="" style="--darkreader-inline-fill:#323739;"></rect></svg>
                  </div>
                  <div class="col-6">
                    <p class="">{{race[0].name}}</p>
                    <p class="m-0" style="font-size: .875em;">{{race[0].type}}</p>
                    <p class="m-0" style="font-size: .875em;">{{race[0].terrain}} - {{race[0].extent}} - {{race[0].starters}} partants</p>
                    <div data-ng-if="race[0].id == victory.id" data-ng-repeat="victory in listRaceVictory" class="text-center pt-1">
                      <span class="podium badge" data-ng-if="race[0].id == victory.id" data-ng-repeat="horse in victory.podium | orderBy: 'position' | limitTo: 3">{{horse.numero}}</span>
                    </div>
                  </div>
                  <div class="col text-end">
                    <p data-ng-if="race[0].isEnd=='false'">{{race[0].time}}</p>
                    <p data-ng-if="race[0].isEnd=='2'" class="fw-bold fst-italic"><i class="fa-sharp fa-solid fa-rotate fa-spin me-2"></i>En cours</p>
                    <p data-ng-if="race[0].isEnd=='true'" class="fw-bold"><i class="fa-solid fa-flag-checkered me-2"></i>Termin√©e</p>

                    <span class="text-muted small align-items-end">{{race[0].id}}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
        
        </div>

        <!-- Modal -->
        <div class="modal fade" id="Modal-notification" tabindex="-1" aria-labelledby="modalNotification" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content bg-transparent text-light rounded-5 border-0" style="backdrop-filter: blur(20px);-webkit-backdrop-filter: blur(20px);">
              <div class="modal-body">
                <div class="container-fluid">
                  <div class="row">
                    <div class="col-9 text-truncate">
                      <span><small>Toutes les courses on √©t√© mis √† jours.</small></span>
                    </div>
                    <div class="col-3 position-relative">
                      <span class="position-absolute top-0 start-50 translate-middle text-muted">
                        <small>maintenant</small>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Content Wrapper -->
        <!-- <div class="flex-column p-5 container-fluid" data-ng-cloak style="overflow: overlay;">

        </div> -->
        </div>
        <!-- End of Page Wrapper -->

        <script>
            $(() => {
                console.log("init js");

                var $calendarPicker = $('.date');
                var $scope = angular.element($calendarPicker).scope();

                $calendarPicker.datepicker({
                  autoclose: true,
                  todayHighlight: true,
                  todayBtn: true,
                  language: 'fr-FR',
                  weekStart: 1,
                  today: "Today",
                  format: "D dd M",
                  // format: "D dd M yyyy",
                })
                .on("changeDate", function(e) {
                  // `e` here contains the extra attributes
                  // console.log(e)
                  $selectedDay = $calendarPicker.datepicker('getDate');
                  var $tmpSelectedDay = new Date($selectedDay);
                 
                  $scope.listTime = $tmpSelectedDay;
                    urlparamhistory($tmpSelectedDay)
                  $scope.getListRace();
                });

                try {
                  var [ _timestamp, _idRace ] = window.location.href.split('?')[1].split('&');
                  $calendarPicker.datepicker('setDate', moment.unix(_timestamp).format("DD/MM")) // fix fr date and respect format
                } catch(e) {
                  $calendarPicker.datepicker('setDate', moment().unix() + "000");
                }

                $(".datepicker_prev").click(function() {
                  $selectedDay = $calendarPicker.datepicker('getDate');

                  var $tmpSelectedDay = new Date($selectedDay);
                  $tmpSelectedDay.setDate($tmpSelectedDay.getDate() - 1);
                  $calendarPicker.datepicker('update', $tmpSelectedDay);
                 
                  $scope.listTime = $tmpSelectedDay;
                    urlparamhistory($tmpSelectedDay)
                  $scope.getListRace();
                })

                $(".datepicker_next").click(function() {
                  $selectedDay = $calendarPicker.datepicker('getDate');

                  var $tmpSelectedDay= new Date($selectedDay);
                  $tmpSelectedDay.setDate($tmpSelectedDay.getDate() + 1);
                  $calendarPicker.datepicker('update', $tmpSelectedDay);

                  $scope.listTime = $tmpSelectedDay;
                    urlparamhistory($tmpSelectedDay)
                  $scope.getListRace();
                })

                function urlparamhistory($dateTime) {
                  history.pushState({}, null, window.location.pathname+"?"+moment($dateTime).unix());
                }
            })

        </script>

        <!-- Custom scripts for all pages-->

    </body>
</html>